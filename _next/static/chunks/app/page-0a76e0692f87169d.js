(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3765:function(e,s,a){Promise.resolve().then(a.bind(a,6394))},6394:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return p}});var l=a(7437),t=a(2265),r=a(9376),i=a(1609),c=a(2155),d=a(322),n=a(3145),o=a(9089),m=a(9536),x=a(6922),g=a(2324),h=e=>{let{title:s,price:a,image:i,rating:c,description:d,id:h}=e,[u,p]=t.useState(!1),[j,v]=t.useState(!1),{toggleFavorite:w,isFavorite:f}=(0,m.r)(),{addToCart:N,isInCart:b}=(0,x.j)(),y=(0,r.useRouter)(),C=async e=>{try{e.preventDefault(),e.stopPropagation(),v(!0),await y.push(g.h.product(h).replace("/E-commerce/E-commerce","/E-commerce"))}catch(e){console.error("Navigation error:",e)}finally{v(!1)}};return(0,l.jsxs)("div",{className:"group bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300",children:[(0,l.jsxs)("div",{className:"relative aspect-square bg-white",children:[u?(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)(o.H3h,{className:"text-4xl text-gray-300"})}):(0,l.jsx)(n.default,{src:i,alt:s,fill:!0,className:"object-contain p-6 transition-transform duration-300 group-hover:scale-105",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",onError:()=>p(!0)}),(0,l.jsx)("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),w(e)},className:"absolute top-3 right-3 p-2 rounded-full bg-white/80 backdrop-blur-sm hover:bg-white transition-colors shadow-sm z-10",children:(0,l.jsx)(o.$0H,{className:"text-xl ".concat(f(h)?"text-red-500":"text-gray-400")})}),(0,l.jsxs)("div",{className:"absolute bottom-3 right-3 flex items-center bg-white/80 backdrop-blur-sm rounded-full px-3 py-1 shadow-sm",children:[(0,l.jsx)(o.QJe,{className:"text-yellow-400 mr-1"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:(null==c?void 0:c.rate)||0})]})]}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900 line-clamp-1",children:s}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:d})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("p",{className:"text-xl font-bold text-red-600",children:["$",a.toFixed(2)]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),N(e)},className:"w-full px-4 py-2 text-sm rounded-lg transition-colors flex items-center justify-center gap-2 ".concat(b(h)?"bg-green-500 text-white hover:bg-green-600":"bg-black text-white hover:bg-gray-800"),children:[(0,l.jsx)(o.FeP,{}),b(h)?"In Cart":"Add to Cart"]}),(0,l.jsx)("button",{onClick:C,disabled:j,className:"relative w-full px-4 py-2 bg-white text-black text-sm rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed",children:j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"opacity-0",children:"Details"}),(0,l.jsx)(o.fCD,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 animate-spin text-gray-600"})]}):"Details"})]})]})]})]})};function u(){let e=(0,r.useSearchParams)(),[s,a]=(0,t.useState)([]),[n,o]=(0,t.useState)(!0),[m,x]=(0,t.useState)("all");(0,t.useEffect)(()=>{(async()=>{try{let s;let l=e.get("category")||"all",t=e.get("q")||"";x(l),s="all"===l?await i.M.getAll():await i.M.getByCategory(l),t&&(s=s.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()))),a(s)}catch(e){console.error("Failed to fetch products:",e)}finally{o(!1)}})()},[e]);let g=e=>{x(e)};return n?(0,l.jsxs)("div",{className:"flex min-h-screen",children:[(0,l.jsx)(d.Z,{activeCategory:m,onCategoryChange:g}),(0,l.jsxs)("div",{className:"flex-1 md:ml-[25%]",children:[(0,l.jsx)(c.Z,{}),(0,l.jsx)("div",{className:"p-4 md:p-8 mt-16",children:(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,s)=>(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden animate-pulse",children:[(0,l.jsx)("div",{className:"aspect-square bg-gray-200"}),(0,l.jsxs)("div",{className:"p-4 space-y-3",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,l.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"})]})]},s))})})]})]}):(0,l.jsxs)("div",{className:"flex min-h-screen",children:[(0,l.jsx)(d.Z,{activeCategory:m,onCategoryChange:g}),(0,l.jsxs)("div",{className:"flex-1 w-full md:w-full",children:[(0,l.jsx)(c.Z,{}),(0,l.jsx)("main",{className:"p-4 md:p-8 mt-16",children:(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(e=>(0,l.jsx)(h,{id:e.id,title:e.title,price:e.price,description:e.description,category:e.category,image:e.image,rating:e.rating},e.id))})})]})]})}function p(){return(0,l.jsx)(t.Suspense,{fallback:(0,l.jsxs)("div",{className:"flex min-h-screen",children:[(0,l.jsx)("div",{className:"w-64 bg-white shadow-sm"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"h-16 bg-white shadow-sm"}),(0,l.jsx)("div",{className:"p-4 md:p-8 mt-16",children:(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,s)=>(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden animate-pulse",children:[(0,l.jsx)("div",{className:"aspect-square bg-gray-200"}),(0,l.jsxs)("div",{className:"p-4 space-y-3",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,l.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"})]})]},s))})})]})]}),children:(0,l.jsx)(u,{})})}}},function(e){e.O(0,[699,464,127,115,971,117,744],function(){return e(e.s=3765)}),_N_E=e.O()}]);